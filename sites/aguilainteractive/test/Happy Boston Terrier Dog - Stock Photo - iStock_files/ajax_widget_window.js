
namespacing={init:function(namespace){var spaces=[];namespace.split('.').each(function(space){var curSpace=window,i;spaces.push(space);for(i=0;i<spaces.length;i++){if(typeof curSpace[spaces[i]]==='undefined'){curSpace[spaces[i]]={};}
curSpace=curSpace[spaces[i]];}});}};var ajaxWin={contents:'',json:[],loaded:false,show:function(json){ajaxWin.json=json;ajaxWin.buildContents();if(this.loaded){ajaxWin.activateWindow();}else{Event.observe(window,'load',ajaxWin.activateWindow);};},buildContents:function(){var json=ajaxWin.json;ajaxWin.contents='<a onclick="'+(json.cnclFunc?json.cnclFunc:'')+' ajaxWin.cancelWindow(); return false" class="close_btn" title="'+(json.cnclText?json.cnclText:'Cancel')+'" ></a>';ajaxWin.contents+='<div class="hdr" id="ajaxWinHdr">';if(json.title){ajaxWin.contents+=json.title;};ajaxWin.contents+='</div>';ajaxWin.contents+='<div id="ajaxWinBody">';if(json.hdrTxt||json.hdrIcon){ajaxWin.contents+='<table class="ndnt">';ajaxWin.contents+='<tr>';if(json.hdrIcon){ajaxWin.contents+='<td class="m"><img src="'+json.hdrIcon+'" alt="" style="padding-right:6px" /></td>';};ajaxWin.contents+='<td class="m"><strong class="'+json.hdrTxtClass+'">'+json.hdrTxt+'</strong></td>';ajaxWin.contents+='</tr>';ajaxWin.contents+='</table>';};ajaxWin.contents+=json.cntnt;ajaxWin.contents+='</div>';if(json.footer){ajaxWin.contents+='<div class="clear"></div>';ajaxWin.contents+='<div id="ajaxWinFtr" class="ftr">';ajaxWin.contents+=json.footer;ajaxWin.contents+='</div>';};},activateWindow:function(){var json=ajaxWin.json;var ins;if(!json.contentDiv){var content='cntnt';}else{var content=json.contentDiv;}
if(!$('ajaxWin')){ins=new Insertion.Bottom(content,'<div id="ajaxWinBG" style="display:none;" ></div>');ins=new Insertion.Bottom(content,'<div id="ajaxWin" class="dropshadow" style="display:none;" ><div id = "ajaxWinWrapper">'+ajaxWin.contents+'</div></div>');}else{$('ajaxWin').hide();$('ajaxWinWrapper').update(ajaxWin.contents);};if(typeof(json.wdth)!='undefined'){$('ajaxWin').style.width=json.wdth+10+'px';};var w=$('ajaxWin').getWidth();var h=$('ajaxWin').getHeight();var viewportDims=document.viewport.getDimensions();var scrollOffsets=document.viewport.getScrollOffsets();$('ajaxWinBG').style.width=(viewportDims.width*3)+scrollOffsets.left+'px';$('ajaxWinBG').style.height=(viewportDims.height*3)+scrollOffsets.top+'px';$('ajaxWin').style.top=Math.max(0,parseInt((viewportDims.height/2)-(h/2)+scrollOffsets.top,10))+'px';$('ajaxWin').style.left=Math.max(0,parseInt((viewportDims.width/2)-(w/2)+scrollOffsets.left,10))+'px';$('ajaxWinBG').show();$('ajaxWin').show();var draggable=new Draggable('ajaxWin',{handle:'ajaxWinHdr'});if(draggable){$('ajaxWinHdr').setStyle('cursor:move');}
Event.observe(document,'keypress',function(e){if(e.keyCode==27){ajaxWin.cancelWindow();}});document.fire('ajax_widget_window:open');},cancelWindow:function(){if($('ajaxWin')){$('ajaxWin').remove();}
if($('ajaxWinBG')){$('ajaxWinBG').remove();}
document.fire('ajax_widget_window:closed');Event.stopObserving(document,'keypress');}};Event.observe(window,'load',function(){ajaxWin.loaded=true;});try{document.fire('ajax_widget_window:loaded');}catch(e){}